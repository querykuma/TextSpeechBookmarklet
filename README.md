# Text Speech Bookmarklet

ウェブブラウザ内のテキストを読み上げるブックマークレット。

ウェブブラウザ(Chrome, Firefox)に備わっている speechSynthesis の機能を使用する。

## 特徴

- ウェブブラウザ内のテキスト読み上げ。
- 言語の自動判定（英語/日本語/ドイツ語/スペイン語/フランス語/ヒンディー語/インドネシア語/イタリア語/韓国語/オランダ語/ポーランド語/ポルトガル語/ロシア語/中国語）。
- 再生位置に自動スクロール（英語と日本語のみ）。
- 再生位置の赤枠表示（英語と日本語のみ）。
- 再生速度の変更（1/1.25/1.5/1.75/2/4/8倍速）。

## インストール

ブラウザのブックマークバーを表示させ、ブックマークバーから起動できる場所に新しいブックマーク(ブックマークレット)を作成する。

URL 欄に text_speech_bookmark.js の中身(JavaScript)を貼り付ける。名前は何でもいい。

ブックマークバーからブックマークレットを起動することで、表示中のページに対してURL欄に貼り付けたJavaScriptを実行する。

## 使い方

テキストの範囲を選択してブックマークレットを起動すると選択範囲のテキストを読み上げる。

テキストを選択しないでブックマークレットを起動すると中心部のテキストを選んで読み上げる。

読み上げ中にブックマークレットを起動すると読み上げを停止する。

右下のボタンから、一時停止、選択範囲以降を再生、停止、再生速度の変更、位置調整（再生位置に自動スクロール）の切り替えができる。

## オプション

変数configのプロパティをカスタマイズできる。

| プロパティ              | 説明                                                         |
| ----------------------- | ------------------------------------------------------------ |
| use_shortcut_space      | ショートカットキーのスペース(一時停止と再開)を使う。         |
| use_shortcut_arrowright | ショートカットキーの右矢印(選択範囲以降を再生)を使う。自動スクロール時は一時停止してからでないと効かない。 |


## 動作確認環境

- Google Chrome
- Firefox

## ライセンス

MIT ライセンスで提供。

## 既知の不具合

- Chromeは英語と日本語以外は不安定で、boundaryなどのイベントが動かず、赤枠が表示されない。
- FirefoxはspeechSynthesis.getVoices()が英語と日本語の2言語しか返してこないので、これら以外の言語で読み上げできない。
- Chromeは英語と日本語以外では、少ない文字（1000文字以内）を選択範囲にしてブックマークを起動したときしか読み上げない。
- 初回起動時だけ一時停止が効かない。
